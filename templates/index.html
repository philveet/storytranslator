<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story Translator</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Story Translator</h1>
        </header>

        <!-- Authentication Section (PRESERVED - currently disabled for BYOK model) -->
        <section id="auth-section" class="section hidden">
            <div class="card">
                <h2>Authentication</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn primary">Login</button>
                </form>
                <div id="auth-message" class="message"></div>
            </div>
        </section>

        <!-- Main Application Section (visible by default for BYOK model) -->
        <main id="app-section" class="section">
            <div class="card">
                <form id="translation-form">
                    <!-- BYOK: API Key Input -->
                    <div class="form-group">
                        <label for="api-key">OpenAI API Key</label>
                        <input type="password" id="api-key" name="api-key" placeholder="sk-..." required autocomplete="off">
                        <div class="api-key-notice">
                            <span class="privacy-icon">ðŸ”’</span>
                            Your API key is sent directly to OpenAI and is never stored on our servers.
                            <a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener">Get your API key</a>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="target-language">Target Language</label>
                        <select id="target-language" name="target-language" required>
                            <!-- Will be populated dynamically -->
                        </select>
                    </div>
                    <!-- INSERT MODEL PICKER START -->
                    <div class="form-group">
                        <label for="model-picker">Model</label>
                        <select id="model-picker" name="model-picker" required>
                            <option value="gpt-5" selected>GPT-5</option>
                            <option value="gpt-4.1">GPT-4.1</option>
                        </select>
                    </div>
                    <!-- INSERT MODEL PICKER END -->
                    <div id="text-input-container" class="form-group">
                        <label for="input-text">Paste Your Story (up to 50,000 words)</label>
                        <textarea id="input-text" name="input-text" rows="8" placeholder="Paste your text here..."></textarea>
                        <div class="word-count">Words: <span id="word-count">0</span></div>
                    </div>
                    <button type="submit" class="btn primary" id="translate-btn">Translate</button>
                </form>
            </div>

            <!-- Translation Progress -->
            <div id="progress-container" class="card hidden">
                <h2>Translation Progress</h2>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <p id="progress-text">0%</p>
                <p id="chunk-info">Processing chunk 0 of 0</p>
            </div>

            <!-- Results Section -->
            <div id="results-container" class="card hidden">
                <h2>Translation Results</h2>
                <div class="result-actions">
                    <button class="btn secondary" id="copy-result">Copy Result</button>
                    <button class="btn secondary" id="toggle-view">Side by Side View</button>
                </div>
                <div id="results-view">
                    <div id="single-view">
                        <div id="translated-text" class="result-text"></div>
                    </div>
                    <div id="side-by-side-view" class="hidden">
                        <div class="result-column">
                            <h3>Original</h3>
                            <div id="original-text" class="result-text"></div>
                        </div>
                        <div class="result-column">
                            <h3>Translated</h3>
                            <div id="translated-text-side" class="result-text"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Built with OpenAI API</p>
            <!-- Logout button preserved but hidden for BYOK model -->
            <button id="logout-btn" class="btn link hidden">Logout</button>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="/static/js/notifications.js"></script>
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/chunker.js"></script>
    <script src="/static/js/translator.js"></script>
    <script src="/static/js/ui.js"></script>
</body>
</html> 